<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>IPFX | Home</title>
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&family=Space+Grotesk:wght@500;700&family=IBM+Plex+Mono:wght@400;600;700&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&family=DM+Sans:wght@400;500;700&display=swap"
          rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a0c;
            --fg: #ffffff;
            --muted: #9ea0a6;
            --line: #2b2d34;
            --silver: #dadee1;
            --forest: #1e3a8a; /* deep cobalt */
            --mint: #2563eb; /* cobalt blue accent */
            --section-gap: 80px; /* increased whitespace */
            --container-w: 1200px;

            /* Typography scale */
            --h1: clamp(2.2rem, 5.6vw, 4.2rem);
            --h2: clamp(1.6rem, 3.6vw, 2.4rem);
            --h3: clamp(1.1rem, 2.2vw, 1.35rem);
            --lead: clamp(1rem, 1.8vw, 1.12rem);

            --radius: 16px;
            --shadow: 0 12px 30px rgba(0, 0, 0, .32);
        }

        * {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            margin: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
            color: var(--fg);
            letter-spacing: 0.2px;
            background: linear-gradient(120deg, rgba(38, 73, 65, 0.10), transparent 60%),
            radial-gradient(1200px 700px at 80% -10%, rgba(207, 210, 215, 0.14), transparent 62%),
            radial-gradient(1000px 580px at -12% 18%, rgba(207, 210, 215, 0.12), transparent 68%),
            conic-gradient(from 200deg at 72% 8%, rgba(37, 99, 235, 0.14), rgba(37, 99, 235, 0.0) 28% 72%, rgba(37, 99, 235, 0.14)),
            linear-gradient(160deg, rgba(207, 210, 215, 0.08), transparent 30%),
            var(--bg);
            background-attachment: fixed;
        }


        .container {
            width: min(var(--container-w), 92vw);
            margin: auto;
        }

        .full-bg-section {
            background: linear-gradient(180deg, #0e0e12, #0a0a0b); /* or any color */
            width: 100%;
            padding-top: var(--section-gap);
            padding-bottom: var(--section-gap);
        }

        .end {
            background: linear-gradient(180deg, #0a0a0b, #000000); /* or any color */
        }


        header {
            position: sticky;
            top: 0;
            z-index: 60;
            background: var(--bg);
            border-bottom: 1px solid var(--line);
            padding-top: 2px;
        }

        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 90px;
        }

        .brand {
            display: inline-flex;
            align-items: center;
            gap: .6rem;
            text-decoration: none;
            color: var(--fg);
        }

        .brand img {
            width: 34px;
            height: 34px;
            object-fit: contain;
            filter: drop-shadow(0 2px 10px rgba(0, 0, 0, .4));
        }

        .brand b {
            font-family: 'Space Grotesk', 'Inter', system-ui;
            font-weight: 700;
            letter-spacing: 0.7px;
            font-size: 1.04rem;
        }

        nav .menu {
            display: flex;
            align-items: center;
            gap: 2.5rem;
            position: relative;
        }

        nav .menu a {
            color: var(--fg);
            text-decoration: none;
            opacity: .92;
            font-weight: 500;
            letter-spacing: 0.2px;
            font-family: 'Space Grotesk', 'Inter', system-ui;
            font-size: 1.02rem;
        }

        nav .menu a:hover {
            opacity: 1;
            text-decoration: underline;
            text-decoration-thickness: 1px;
            text-underline-offset: 4px;
        }

        .sep {
            width: 1px;
            height: 20px;
            background: var(--line);
            margin: 0 .2rem;
            background-color: rgba(255, 255, 255, 0.7);
        }

        .dropdown {
            position: relative;
        }

        .dropdown-btn {
            display: inline-flex;
            align-items: center;
            gap: .4rem;
            cursor: default;
            text-decoration: underline;
            text-decoration-thickness: 0.5px;
            text-underline-offset: 3px;
            font-weight: 500;
            letter-spacing: 0.3px;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 1.02rem;
        }

        .dropdown ul {
            list-style: none;
            padding: .5rem;
            margin: .4rem 0 0;
            position: absolute;
            top: 100%;
            left: 0;
            background: #0f1116;
            border: 1px solid var(--line);
            border-radius: 10px;
            min-width: 180px;
            display: none;
            box-shadow: 0 12px 30px rgba(0, 0, 0, .35);
        }

        .dropdown:hover ul {
            display: block;
        }

        .dropdown li {
            padding: .35rem .5rem;
            border-radius: 8px;
        }

        .dropdown li a {
            display: block;
            opacity: .85;
            font-weight: 500;
        }

        .dropdown li:hover {
            background: #13151b;
        }

        /* Hero */
        .hero {
            padding: 100px 0 140px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1.1fr .9fr;
            gap: 4rem;
            align-items: center;
        }

        @media (max-width: 900px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .headline {
            font-family: 'Space Grotesk', 'Inter', system-ui;
            font-weight: 600;
            font-size: var(--h1);
            line-height: 1.12;
            letter-spacing: -0.02em;
            color: #ffffff;
            margin: 0 0 10px;
        }

        .headline .hl {
            color: var(--mint);
        }

        .subhead {
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.92); /* visible, normal text */
            font-family: 'Manrope', 'DM Sans', sans-serif;
            font-weight: 400;
            letter-spacing: .03em;
            font-size: var(--lead);
            line-height: 1.5;
            max-width: 54ch;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }

        /* Make sure the word is real, visible text (not masked by a parent) */
        .flicker-word {
            position: relative;
            color: rgba(255, 255, 255, 0.92);
            -webkit-text-fill-color: currentColor; /* Safari/WebKit */
            background: none !important;
            -webkit-background-clip: initial !important;
            background-clip: initial !important;
            transition: opacity 120ms ease;
        }

        /* The “dim” state during a flicker */
        .flicker-word.is-flicker {
            opacity: .28;
        }

        /* tweak depth here */

        /* underline draw-on-load (unchanged) */
        .underline-load {
            position: relative;
            display: inline-block;
            text-decoration: none;
            color: inherit;
            -webkit-text-fill-color: currentColor;
        }

        .underline-load::after {
            content: "";
            position: absolute;
            left: 0;
            bottom: -2px;
            width: 0%;
            height: 2px;
            background: var(--mint);
            transition: width .9s cubic-bezier(.25, 1, .3, 1) .25s;
        }

        body.loaded .underline-load::after {
            width: 100%;
        }

        /* Respect reduced motion */
        @media (prefers-reduced-motion: reduce) {
            .flicker-word {
                transition: none;
            }
        }

        .cta-row {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            margin-top: 28px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: .5rem;
            height: 50px;
            padding: 0 16px;
            border-radius: 5px;
            font-weight: 600;
            text-decoration: none;
            font-size: 1rem;
            letter-spacing: .01em;
            transition: transform .15s ease, box-shadow .2s ease, background .2s ease, color .2s ease, border-color .2s ease;
            will-change: transform;
        }

        .btn:hover {
            transform: translateY(-1px);
        }

        .btn-primary {
            color: #071014;
            background: linear-gradient(180deg, var(--silver), #bfc3c8);
            border: 0 solid #c4cbcf;
            box-shadow: 0 10px 24px rgba(0, 0, 0, .28);
        }

        .btn-primary:hover {
            background: linear-gradient(180deg, #ffffff, #c7ccd2);
        }

        .btn-secondary {
            color: #ffffff;
            background: transparent;
            border: 1px solid var(--line);
            box-shadow: none;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        #tape, #candles {
            display: block;
            width: 100%;
            height: 420px;
        }

        .chart-box {
            height: 420px; /* or use aspect-ratio: 16/9; */
        }

        .chart-box canvas {
            width: 100%;
            height: 100%; /* OK now because parent has a height */
        }

        /* Band (What are we) */
        .band {
            width: 100%;
            background: transparent;
            padding: var(--section-gap) 0;
            position: relative;
        }

        .band-side {
            position: relative;
        }

        .band-card {
            margin-left: auto;
            margin-right: auto;
            margin-top: 120px;
            width: min(560px, 92%);
            background: linear-gradient(180deg, #21284b, #282f55);
            border: 0px solid #ffffff;
            border-radius: var(--radius);
            padding: clamp(26px, 4vw, 44px);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            transform: translateY(-10px);
            z-index: 1;

        }

        .band-card::before {
            content: "";
            position: absolute;
            inset: 10px;
            background: radial-gradient(700px 260px at 90% -10%, rgba(79, 125, 240, 0.12), transparent 60%),
            linear-gradient(160deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.00) 40%);
            pointer-events: none;
        }

        .band-card h2 {
            margin: 0 0 14px;
            color: #ffffff;
            font-family: 'Space Grotesk', 'Inter';
            font-weight: 200;
            font-size: var(--h2);
            letter-spacing: .01em;
        }

        .band-card p {
            margin: 0;
            color: rgba(255, 255, 255, 0.96);
            font-weight: 300;
            letter-spacing: .02em;
            line-height: 1.6;
            font-size: 1rem;
            max-width: 60ch;
        }

        /* ====== Layout variables ====== */
        :root {
            --af-spine-w: 1px;
            --af-gap-v: clamp(56px, 9vh, 96px);
            --af-line: rgba(255, 255, 255, 0.08);
            --af-accent: rgba(37, 99, 235, 0.4);
            --af-muted: rgba(255, 255, 255, .7);
            --af-sticky-top: clamp(56px, 10vh, 96px);
            --container-w: 1200px;
        }

        .aboutflow {
            padding-top: clamp(40px, 8vw, 112px);
            padding-right: clamp(40px, 8vw, 112px);
            padding-left: clamp(40px, 8vw, 112px);
            margin-top: 35px;
            margin-bottom: 20px;
            background: transparent;
        }

        /* GRID: [left] [spine] [right] */
        .af-grid {
            width: min(var(--container-w), 92vw);
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr var(--af-spine-w) minmax(400px, 0.95fr);
            column-gap: clamp(48px, 6vw, 80px);
            align-items: start;
            position: relative;
        }

        .af-head {
            grid-column: 1 / -1;
            margin: 0 0 32px;
            font-family: 'Space Grotesk', 'Inter', system-ui;
            font-weight: 700;
            font-size: clamp(1.4rem, 2.8vw, 2rem);
            color: #ffffff;
        }

        /* LEFT stack (namespaced) */
        .af-zig {
            grid-column: 1;
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: var(--af-gap-v);
            position: relative;
        }

        /* Vertical connecting line behind boxes */
        .af-zig::before {
            content: "";
            position: absolute;
            left: -14px;
            top: 8px;
            bottom: 0;
            width: 1px;
            /*background: linear-gradient(180deg, var(--af-line) 15%, var(--af-line) 85%, transparent);*/
            background: var(--af-line);
            z-index: 0;
        }

        /* each step = [card][spine gutter] */
        .af-step {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            position: relative;
        }

        /* spine node - minimal dot */
        .af-node {
            position: absolute;
            left: -3px;
            top: 3px;
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: rgba(37, 99, 235, 0.6);
            z-index: 1;
        }

        /* the card - minimal, typography-led */
        .af-card {
            background: transparent;
            border: none;
            border-left: 2px solid var(--af-line);
            padding: 0 0 0 24px;
            overflow-wrap: anywhere;
            word-break: break-word;
            position: relative;
            flex: 1;
            transition: border-color 0.3s ease, padding-left 0.3s ease;
        }

        .af-card:hover {
            border-left-color: var(--af-accent);
            padding-left: 28px;
        }

        /* connector arm - minimal line to spine */
        .af-card::after {
            content: "";
            position: absolute;
            top: 6px;
            left: -26px;
            width: 24px;
            height: 1px;
            background: var(--af-line);
        }

        /* typography inside card */
        .af-card h3 {
            margin: 0 0 8px;
            font-family: 'Space Grotesk', 'Inter', system-ui;
            font-weight: 600;
            font-size: clamp(1.25rem, 2.4vw, 1.55rem);
            color: rgba(255, 255, 255, 0.95);
            letter-spacing: -0.02em;
            line-height: 1.3;
        }

        .af-card p {
            margin: 0;
            color: var(--af-muted);
            line-height: 1.7;
            font-size: clamp(0.95rem, 1.4vw, 1.05rem);
            font-weight: 400;
            letter-spacing: 0.005em;
        }

        /* CENTER spine column (visual separator) */
        .af-spine {
            grid-column: 2;
            align-self: stretch;
            justify-self: center;
            width: 1px;
            background: linear-gradient(180deg, transparent, var(--af-line) 15%, var(--af-line) 95%, transparent);
        }

        /* RIGHT sticky typewriter - minimal, elegant */
        .af-right {
            grid-column: 3;
            position: sticky;
            top: var(--af-sticky-top);
            align-self: start;
        }

        .af-typebox {
            background: transparent;
            border: none;
            border-left: 3px solid var(--af-accent);
            padding: 0 0 0 32px;
            position: relative;
        }

        .af-typebox::before {
            display: none;
        }

        .af-typebox::after {
            display: none;
        }

        .af-typebox h2 {
            margin: 0 0 20px;
            font-family: 'Space Grotesk', 'Inter', system-ui;
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--af-accent);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            opacity: 1;
        }

        .af-typewriter {
            display: block;
            font-family: 'Inter', 'Space Grotesk', system-ui;
            font-weight: 400;
            font-size: clamp(1.05rem, 2vw, 1.25rem);
            line-height: 1.75;
            color: rgba(255, 255, 255, 0.9);
            white-space: normal;
            min-height: 3.5em;
            letter-spacing: 0.005em;
        }

        .af-typewriter::after {
            content: '';
            display: inline-block;
            width: 2px;
            height: 1em;
            vertical-align: -0.15em;
            margin-left: 4px;
            background: currentColor;
            animation: af-blink .9s steps(1, end) infinite;
        }

        @keyframes af-blink {
            50% {
                opacity: 0;
            }
        }

        /* reveal-on-scroll */
        .af-step .af-card, .af-step .af-node {
            opacity: 1;
            transform: none;
            transition: opacity .6s ease, transform .6s ease;
        }

        .af-step.is-inview .af-card, .af-step.is-inview .af-node {
            opacity: 1;
            transform: none;
        }

        /* Mobile: hide spine + right panel; keep cards only */
        @media (max-width: 900px) {
            .af-grid {
                grid-template-columns: 1fr;
            }

            .af-spine {
                display: none;
            }

            .af-right {
                display: none;
            }

            .af-step {
                grid-template-columns: 1fr;
            }

            .af-node {
                display: none;
            }

            .af-card::after {
                display: none;
            }

            .af-zig::before {
                display: none;
            }
        }

        /* Respect motion prefs */
        @media (prefers-reduced-motion: reduce) {
            .af-step .af-card, .af-step .af-node {
                transition: none;
            }

            .af-typewriter::after {
                animation: none;
            }
        }


        .step .node {
            position: absolute;
            top: 18px;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--silver);
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.06);
        }

        .step h3 {
            margin: 10px 0 0;
            font-family: 'Space Grotesk', 'Inter', system-ui;
            font-weight: 700;
            font-size: var(--h3);
            color: #e9efff;
            letter-spacing: .01em;
        }

        .step p {
            margin: 8px 0 0;
            font-size: .95rem;
            color: rgba(255, 255, 255, 0.72);
            line-height: 1.5;
            letter-spacing: .01em;
        }

        @media (max-width: 900px) {
            .timeline {
                grid-template-columns: 1fr;
                gap: .9rem;
            }

            .timeline::before {
                display: none;
            }

            .step .node {
                left: 18px;
                top: 18px;
                transform: none;
            }

            .step {
                padding-left: 50px;
            }
        }


        .card h3 {
            margin: 0 0 8px;
            color: #e9ecef;
            font-size: 1.1rem;
        }

        .card p {
            margin: 0;
            color: rgba(255, 255, 255, 0.78);
            font-size: .95rem;
        }

        .why-us-section {
            padding: var(--section-gap) 0;

            background: #0d0f13; /* Or any background you prefer */
        }

        .why-us-container {
            width: min(1200px, 90vw);
            margin: 0 auto;
            margin-top: 30px;
            display: grid;
            grid-template-columns: 1fr 1px 1fr;
            gap: 3rem;
            align-items: center;
        }

        .why-us-image .image-placeholder {
            width: 100%;
            height: 300px;
            background-color: rgba(38, 73, 65, 0.60);
            border: 1px ridge #808080;
            color: #777;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .why-us-separator {
            background: rgba(255, 255, 255, 0.08);
            width: 1px;
            height: 100%;
        }

        .why-us-content h2 {
            font-family: 'Space Grotesk', 'Inter', sans-serif;
            font-size: var(--h2);
            margin: 0 0 16px;
            color: #ffffff;
        }

        .why-us-content p {
            font-size: var(--lead);
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.85);
            max-width: 60ch;
        }

        /* Responsive stacking */
        @media (max-width: 860px) {
            .why-us-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .why-us-separator {
                display: none;
            }
        }


        /* Testimonials */
        .testimonials {
            /*margin: var(--section-gap);*/
            margin-bottom: var(--section-gap);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        @media (max-width: 980px) {
            .testimonials {
                grid-template-columns: 1fr;
            }
        }

        .review {
            background: #0f1116;
            border: 1px solid var(--line);
            padding: 18px;
            border-radius: 12px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.16);
        }

        .review p {
            margin: 0 0 8px;
            color: rgba(255, 255, 255, 0.9);
        }

        .review small {
            color: var(--muted);
        }

        /* Contact + Footer */
        .contact {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 20px;
            margin: 40px 0 80px;
            align-items: start;
        }

        @media (max-width: 980px) {
            .contact {
                grid-template-columns: 1fr;
            }
        }

        .contact .text {
            color: rgba(255, 255, 255, 0.9);
        }

        .contact .card {
            padding: 18px;
        }

        .mini-cta {
            display: inline-block;
            padding: 10px 14px;
            border-radius: 10px;
            background: linear-gradient(180deg, var(--silver), #bfc3c8);
            color: #071014;
            font-weight: 700;
            text-decoration: none;
        }

        footer {
            padding: 28px 0;
            color: var(--muted);
            border-top: 1px solid rgba(255, 255, 255, 0.03);
        }


        /* --- NEW: Stats section --- */
        section.stats {
            padding: 100px 0 var(--section-gap);
            border-top: 1px solid var(--line);
            border-bottom: 1px solid var(--line);
            background: linear-gradient(180deg, rgba(37, 99, 235, 0.06), rgba(37, 99, 235, 0.02));
        }

        .stats h2 {
            font-family: 'Space Grotesk', 'Inter';
            font-weight: 700;
            font-size: var(--h2);
            margin: 0 0 6px;
        }

        .stats p.lead {
            margin: 0;
            color: var(--muted);
            font-size: var(--lead);
        }

        .kpis {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-top: 22px;
        }

        .kpi {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01));
            border: 1px solid #1e232b;
            border-radius: var(--radius);
            padding: 22px;
        }

        .kpi .value {
            font-family: 'Space Grotesk', 'Inter';
            font-size: clamp(28px, 4vw, 42px);
            font-weight: 700;
            letter-spacing: -0.02em;
            color: #e6e8ed;
        }

        .kpi .label {
            color: #b9bec6;
            font-weight: 500;
            margin-top: 6px;
        }

        .kpi .foot {
            color: #7b7f86;
            font-size: 13px;
            margin-top: 8px;
        }

        @media (max-width: 1040px) {
            .kpis {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .kpis {
                grid-template-columns: 1fr;
            }
        }

        /* --- NEW: Products static grid (replaces carousel) --- */
        .products {
            margin-top: 140px;
            padding-top: var(--section-gap);
            padding-bottom: var(--section-gap);
            background: linear-gradient(180deg, #121620, #0e0e12); /* Darker fade */
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        @media (max-width: 980px) {
            .product-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 640px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
        }

        .product-card {
            position: relative;
            background: #0f1116;
            border: 1px solid var(--line);
            border-radius: 14px;
            padding: 18px;
            display: grid;
            gap: 8px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.22);
            overflow: hidden;
        }

        .product-card::after {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(700px 240px at 80% -20%, rgba(64, 113, 229, 0.05), transparent 60%);
            pointer-events: none;
        }

        .product-card .tag {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            width: fit-content;
            font-size: 12px;
            padding: 6px 10px;
            border-radius: 999px;
            background: #0e141a;
            color: #cfe0ff;
            border: 1px solid #253046;
        }

        .product-card h3 {
            position: relative;
            z-index: 1;
            margin: 0;
            font-family: 'Space Grotesk', 'Inter', system-ui;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: .01em;
            font-size: 1.15rem;
        }

        .product-card p {
            margin: 0;
            color: rgba(255, 255, 255, 0.82);
        }

        .product-card .meta {
            color: #8b90a0;
            font-size: 13px;
        }

        .product-card {
            position: relative;
            overflow: hidden;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 200px;
        }

        .product-card .tag,
        .product-card p {
            display: none;
        }

        .product-card h3 {
            margin: 0 0 12px;
        }

        .product-card .meta {
            margin: 0;
        }

        .product-card > *:not(.hover-reveal) {
            transition: opacity 0.3s ease;
        }

        .product-card:hover > *:not(.hover-reveal) {
            opacity: 0;
        }

        .hover-reveal {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: left;
            background: rgba(15, 17, 22, 0.85);
            backdrop-filter: blur(8px);
            z-index: 2;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.35s ease;
        }

        .product-card:hover .hover-reveal {
            opacity: 1;
            pointer-events: auto;
        }

        .hover-reveal .typewriter-text {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.94rem;
            color: #ffffff;
            line-height: 1.7;
            white-space: normal;
            overflow: hidden;
        }

        .hover-reveal .typewriter-text::after {
            content: "";
            display: inline-block;
            width: 2px;
            height: 1em;
            vertical-align: -0.1em;
            margin-left: 3px;
            background: #ffffff;
            animation: cursor-blink 0.75s step-end infinite;
        }

        @keyframes cursor-blink {
            0%, 49% {
                opacity: 1;
            }
            50%, 100% {
                opacity: 0;
            }
        }


        /* --- NEW: reveal-on-scroll --- */
        .reveal {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity .6s ease, transform .6s ease;
        }

        .reveal.is-visible {
            opacity: 1;
            transform: none;
        }

        /* Typewriter effect for "What are we?" box */
        .typewriter-wrap {
            display: inline-block;
            font-family: 'IBM Plex Mono', 'Space Grotesk', 'Inter', system-ui, monospace;
            font-weight: 500;
            font-size: clamp(0.9rem, 1.6vw, 1.05rem);
            line-height: 1.6;
            color: #ffffff;
            white-space: nowrap;
        }

        .typewriter {
            position: relative;
            background: none;
            color: #ffffff;
        }

        /* Blinking caret */
        .typewriter::after {
            content: "";
            display: inline-block;
            width: 2px;
            height: 1em;
            vertical-align: -0.15em;
            margin-left: 4px;
            background: currentColor;
            animation: tw-blink 0.9s steps(1, end) infinite;
        }

        @keyframes tw-blink {
            50% {
                opacity: 0;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .typewriter::after {
                animation: none;
            }
        }

        /*CHALLENGE PRICES SECTION*/
        .challenge-offers {
            padding: var(--section-gap) 0;
            background: linear-gradient(180deg, #0a0a0b 0%, rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0.2) 90%, #0a0a0b 100%);
            color: #fff;
        }

        .challenge-offers h2 {
            font-size: var(--h2);
            margin-bottom: 12px;
            font-family: 'Space Grotesk', sans-serif;
        }

        .challenge-offers .subtext {
            font-size: var(--lead);
            color: var(--muted);
            max-width: 60ch;
            margin-bottom: 32px;
        }

        .balance-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 32px;
            align-items: center;
        }

        .balance-selector span {
            font-weight: 500;
            font-size: 1rem;
        }

        .balance-btn {
            padding: 8px 16px;
            background: #1a1d24;
            border: 1px solid #2e2f35;
            border-radius: 6px;
            color: #cfe0ff;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .balance-btn.active {
            background: #2563eb;
            border-color: #2563eb;
            color: #fff;
        }

        table.terms-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        table.terms-table th,
        table.terms-table td {
            padding: 20px 12px; /* top/bottom 20px makes the cell taller */
            height: 60px; /* optional: forces a minimum height */
        }


        .table-row {
            display: grid;
            grid-template-columns: 1.2fr 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }

        .table-row.header {
            margin-bottom: 16px;
        }

        .table-row:not(.header):nth-child(even) {
            background: transparent;
        }

        .cell {
            padding: 20px 16px;
            background: rgba(26, 28, 34, 0.6);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: 400;
            border: 1px solid rgba(43, 45, 52, 0.4);
            transition: background 0.2s ease, border-color 0.2s ease;
        }

        .cell.label {
            font-weight: 600;
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.15), rgba(37, 99, 235, 0.08));
            justify-content: flex-start;
            text-align: left;
            color: #ffffff;
            border: 1px solid rgba(37, 99, 235, 0.3);
            font-size: 0.98rem;
            letter-spacing: 0.01em;
        }

        .cell.head {
            font-weight: 700;
            font-size: 1.05rem;
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.25), rgba(37, 99, 235, 0.15));
            justify-content: center;
            text-align: center;
            color: #ffffff;
            border: 1px solid rgba(37, 99, 235, 0.4);
            padding: 24px 16px;
            letter-spacing: 0.02em;
        }

        .cell:not(.label):not(.empty):not(.head) {
            background: rgba(19, 21, 27, 0.8);
            color: rgba(255, 255, 255, 0.9);
        }

        .cell:not(.label):not(.empty):not(.head):hover {
            background: rgba(26, 28, 34, 0.95);
            border-color: rgba(43, 45, 52, 0.6);
        }

        .cell.empty {
            background: transparent;
            border: none;
        }

        @media (max-width: 780px) {
            .table-row {
                grid-template-columns: 1fr 1fr;
                grid-auto-rows: auto;
                grid-template-areas:
      "label label"
      "step1 step2";
            }

            .terms-table {
                font-size: 0.9rem;
            }

            .table-row.header {
                display: none;
            }
        }

        .flow-divider {
            position: relative;
            height: 60vh;
            min-height: 400px;
            width: 100%;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg,
            transparent 0%,
            rgba(18, 22, 32, 0.02) 15%,
            rgba(18, 22, 32, 0.15) 40%,
            rgba(18, 22, 32, 0.5) 70%,
            rgba(18, 22, 32, 0.85) 90%,
            #121620 100%);
        }

        #flowLines {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            display: block;
            pointer-events: none;
            opacity: 0.85;
            mask-image: linear-gradient(to bottom,
            transparent 0%,
            rgba(0,0,0,0.3) 10%,
            rgba(0,0,0,0.9) 25%,
            black 40%,
            black 70%,
            rgba(0,0,0,0.7) 90%,
            transparent 100%);
            /*
            -webkit-mask-image: linear-gradient(to bottom,
            transparent 0%,
            rgba(0,0,0,0.3) 10%,
            rgba(0,0,0,0.9) 25%,
            black 40%,
            black 70%,
            rgba(0,0,0,0.7) 90%,
            transparent 100%);
            */
        }


        .staircase-title {
            position: relative;
            z-index: 2;
            font-family: 'Space Grotesk', 'Inter', system-ui;
            font-size: var(--h2);
            font-weight: 700;
            color: #ffffff;
            text-align: center;
            max-width: 800px;
            margin-top: 60px;
            padding: 40px 20px 0;
        }

        .staircase-subtitle {
            position: relative;
            z-index: 2;
            font-size: var(--lead);
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.6;
            text-align: center;
            max-width: 800px;
            margin: 0 auto 40px;
            padding: 0 20px;
        }

    </style>
</head>
<script>
    // underline animation
    window.addEventListener('load', () => {
        document.body.classList.add('loaded');
    });

    // start flicker after DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
        const nodes = document.querySelectorAll('.flicker-word');
        if (!nodes.length) return;

        nodes.forEach(el => {
            const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            const forced = el.dataset.flicker === 'force';
            if (reduceMotion && !forced) return; // respect OS setting unless forced

            function flickerOnce() {
                // 1–3 quick dips for an organic feel
                const bursts = 1 + Math.floor(Math.random() * 3);
                let i = 0;

                function dip() {
                    el.classList.add('is-flicker');
                    setTimeout(() => {
                        el.classList.remove('is-flicker');
                        i++;
                        if (i < bursts) {
                            setTimeout(dip, 40 + Math.random() * 120);
                        } else {
                            scheduleNext();
                        }
                    }, 80 + Math.random() * 140);
                }

                dip();
            }

            function scheduleNext() {
                // wait 1.8s–6s between flickers
                const wait = 1800 + Math.random() * 4200;
                setTimeout(flickerOnce, wait);
            }

            scheduleNext();
        });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Typewriter for .af-typewriter
        const tw = document.querySelector('.af-typewriter');
        if (tw) {
            const phrasesAttr = tw.dataset.phrases || '';
            const phrases = phrasesAttr.split('|').map(s => s.trim()).filter(Boolean);
            const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

            if (!reduced && phrases.length) {
                const TYPE = 12, ERASE = 8, HOLD1 = 1600, HOLD2 = 600;
                let i = 0, j = 0, typing = true;

                const tick = () => {
                    if (typing) {
                        tw.textContent = phrases[i].slice(0, ++j);
                        if (j === phrases[i].length) {
                            typing = false;
                            setTimeout(tick, HOLD1);
                        } else {
                            setTimeout(tick, TYPE);
                        }
                    } else {
                        tw.textContent = phrases[i].slice(0, --j);
                        if (j === 0) {
                            typing = true;
                            i = (i + 1) % phrases.length;
                            setTimeout(tick, HOLD2);
                        } else {
                            setTimeout(tick, ERASE);
                        }
                    }
                };

                // Start the animation
                setTimeout(tick, 500);
            } else if (phrases[0]) {
                tw.textContent = phrases[0];
            }
        }

        // Reveal-on-scroll
        const steps = document.querySelectorAll('.af-step');
        if (steps.length) {
            const io = new IntersectionObserver((entries, obs) => {
                for (const e of entries) {
                    if (e.isIntersecting) {
                        e.target.classList.add('is-inview');
                        obs.unobserve(e.target);
                    }
                }
            }, {threshold: 0.25});
            steps.forEach(s => io.observe(s));
        }
    });
</script>

<body>
<header>
    <div class="container nav">
        <a class="brand" href="index.html">
            <img src="/assets/images/favicon.ico" alt="IPFX logo"/>
            <b>IPFX&nbsp;CAPITAL</b>
        </a>
        <nav>
            <div class="menu" id="menu">
                <div class="dropdown">
                    <span class="dropdown-btn">Services ▾</span>
                    <ul>
                        <li><a href="infinity.html">Infinity Challenge</a></li>
                        <li><a href="personalised-challenge.html">Personalised Application Challenge</a></li>
                        <li><a href="trading-pot.html">Social Trading / Pot</a></li>
                    </ul>
                </div>
                <a href="faq.html">FAQ</a>
                <a href="about.html">About Us</a>
                <a href="contact.html">Contact</a>
                <span class="sep" aria-hidden="true"></span>
                <a href="login.html">Login</a>
            </div>
        </nav>
    </div>
</header>

<main>
    <!-- HERO -->
    <section class="hero">
        <div class="container grid">
            <div class="hero-copy reveal">
                <h1 class="headline">The capital platform that only <span class="hl">profits from your successes</span>,
                    not your failures.</h1>

                <p class="subhead">You prove your talent, we provide your capital.<br>Fair. Scalable. <span
                        class="underline-load flicker-word" data-flicker="force">Transparent.</span>
                </p>
                <div class="cta-row">
                    <a class="btn btn-primary" href="infinity.html">Start Infinity Challenge</a>
                    <a class="btn btn-secondary" href="#products">Explore Products</a>
                </div>
            </div>
            <div class="chart-box reveal"><canvas id="candles" aria-hidden="true"></canvas></div>
        </div>
    </section>


    <!-- NEW: STATS / NUMBERS -->
    <section class="stats" aria-labelledby="stats-heading">
        <div class="container">
            <h2 id="stats-heading" class="reveal">Numbers that build trust.</h2>
            <p class="lead reveal">Institutional clarity: independently verifiable KPIs that reflect our incentives and
                your outcomes.</p>

            <div class="kpis">
                <article class="kpi reveal" data-kpi="traders-funded">
                    <div class="value" data-countup>1,248</div>
                    <div class="label">Traders funded</div>
                    <div class="foot">Across all programmes</div>
                </article>
                <article class="kpi reveal" data-kpi="capital-deployed">
                    <div class="value live-count" data-countup>3,000</div>
                    <div class="label">Pre-registered members</div>
                    <div class="foot">Aggregate mirrored exposure</div>
                </article>
                <article class="kpi reveal" data-kpi="payout-time">
                    <div class="value" data-countup>10 min</div>
                    <div class="label">Average payout time</div>
                    <div class="foot">From request to receipt</div>
                </article>
                <article class="kpi reveal" data-kpi="scaled-traders">
                    <div class="value" data-countup>312</div>
                    <div class="label">Scaled to real capital</div>
                    <div class="foot">Active A-book users</div>
                </article>
            </div>
        </div>
    </section>

    <!-- ABOUT + HOW WE WORK (left stack + spine + sticky typewriter) -->
    <section id="about-flow" class="aboutflow" aria-labelledby="af-heading">
        <div class="af-grid">
            <!-- LEFT -->
            <ol class="af-zig">
                <li class="af-step">
                    <span class="af-node" aria-hidden="true"></span>
                    <div class="af-card">
                        <h3>Show us your trade history</h3>
                        <p>Upload trades from MT5 or begin tracking your positions live.</p>
                    </div>
                </li>
                <li class="af-step">
                    <span class="af-node" aria-hidden="true"></span>
                    <div class="af-card">
                        <h3>Increase your account size</h3>
                        <p>As you perform, we'll reach out to upgrade your capital. Withdrawals begin here.</p>
                    </div>
                </li>
                <li class="af-step">
                    <span class="af-node" aria-hidden="true"></span>
                    <div class="af-card">
                        <h3>Secure our trust</h3>
                        <p>When verified, you switch from simulated funds to real funds you can control.</p>
                    </div>
                </li>
                <li class="af-step">
                    <span class="af-node" aria-hidden="true"></span>
                    <div class="af-card">
                        <h3>Scale & retain</h3>
                        <p>Through our account insurance we remove the risk of losing access to your capital.</p>
                    </div>
                </li>
            </ol>

            <!-- CENTER spine -->
            <div class="af-spine" aria-hidden="true"></div>

            <!-- RIGHT sticky typewriter -->
            <aside class="af-right" aria-labelledby="about-title">
                <div class="af-typebox">
                    <h2 id="about-title">About IPFX</h2>
                    <p class="af-typewriter" data-phrases=
                            "Show us your trade history, or let us track your positions live. This will allow us to assess your potential to work with us.|
                            You don't pass our requirements? See our other products regarding the mirroring scheme. We have the right tools for you.|
                            If you pass, we'll start you on a B-book model. This means you work with simulated markets, but we still provide you with payouts.|
                            As you solidify yourself as one of our clients, we will reach out to you personally to assess your next steps.|
                            Upon verification, we will upgrade your account to an A-book model, granting you access to real funds you can control.|
                            We provide account insurance to protect you from losing access to your capital, centralising your funds and mitigating all your risk.|
                            We are committed to providing you with the best experience possible, and we are always looking to improve our services. If you have any questions, please don't hesitate to contact us.|
                            We look forward to working with you! Thank you for choosing IPFX Capital.|">
                    </p>
                </div>
            </aside>
        </div>
    </section>

    <!--
    
    <section class="flow-divider">
        !--
        <h2 id="staircase-heading" class="staircase-title reveal">Ascend The Infinity Challenge</h2>
        <p class="staircase-subtitle reveal">Scale your capital infinitely through consistent performance. Each level
            unlocks greater potential.</p>
        --
        <canvas id="flowLines"></canvas>
    </section>

    -->

    <!-- NEW: PRODUCTS (STATIC GRID) -->
    <section id="products" class="products" aria-label="Products">
        <div class="container">
            <h2 class="reveal" style="font-family:'Space Grotesk','Inter'; font-size:var(--h2); margin:0 0 6px;">
                Our core programs</h2>
            <p class="reveal" style="margin:0 0 16px; color:var(--muted); font-size:var(--lead)">Explore each funding path — hover to see how it works, click to dive deeper.</p>

            <div class="product-grid">
                <article class="product-card reveal"
                         data-description="Start simulated and double capital every 10% gain. Consistency triggers transition to real capital with active payouts.">
                    <div class="hover-reveal">
                        <div class="typewriter-text"></div>
                    </div>
                    <span class="tag">Free entry</span>
                    <h3>Infinity Challenge</h3>
                    <p>Start simulated, double every +10% gain. Consistency triggers transition to real
                        capital.</p>
                    <div class="meta">No buy-in • Risk-aware scaling</div>
                </article>

                <article class="product-card reveal"
                         data-description="Choose your target, drawdown, duration, and size. A dynamic failure-only fee keeps our incentives aligned with yours.">
                    <div class="hover-reveal">
                        <div class="typewriter-text"></div>
                    </div>
                    <span class="tag">You set the rules</span>
                    <h3>Personalized Application Challenge (PAC)</h3>
                    <p>Choose target, drawdown, duration, and size. A dynamic failure-only fee aligns incentives.</p>
                    <div class="meta">Pay only on failure</div>
                </article>

                <article class="product-card reveal"
                         data-description="After a drawdown hit, retain your account by sacrificing a portion of pending payout. Progress isn't reset to zero.">
                    <div class="hover-reveal">
                        <div class="typewriter-text"></div>
                    </div>
                    <span class="tag">Keep your seat</span>
                    <h3>Insurance / Retention</h3>
                    <p>After a hit, retain your account by sacrificing a portion of pending payout. Progress isn't reset
                        to zero.</p>
                    <div class="meta">Removes fear of restarting</div>
                </article>

                <article class="product-card reveal"
                         data-description="Top traders share verified risk scores; you can buy in to mirror their profits. Fees reward the signal-generators.">
                    <div class="hover-reveal">
                        <div class="typewriter-text"></div>
                    </div>
                    <span class="tag">Transparent</span>
                    <h3>Social Trading — Pot System</h3>
                    <p>Top traders share verified risk scores; you can buy in to mirror their profits. Fees reward the
                        signal-generators.</p>
                    <div class="meta">No experience required</div>
                </article>

                <article class="product-card reveal"
                         data-description="You still want to buy in for a traditional prop challenge? We've got you. Cheap entry with instant capital deployment.">
                    <div class="hover-reveal">
                        <div class="typewriter-text"></div>
                    </div>
                    <span class="tag">Classic style</span>
                    <h3>Traditional Challenge</h3>
                    <p>You still want to buy in for a traditional challenge? We've got you.</p>
                    <div class="meta">Cheap entry • Instant capital</div>
                </article>

                <article class="product-card reveal"
                         data-description="Automated consistency checks, volatility control, and manual review for edge cases. We interact with each client personally.">
                    <div class="hover-reveal">
                        <div class="typewriter-text"></div>
                    </div>
                    <span class="tag">Risk layer</span>
                    <h3>AI & Behavioural Oversight</h3>
                    <p>Automated consistency checks, volatility control, and manual review for edge cases. We interact
                        with
                        each client personally.</p>
                    <div class="meta">Trust tiers • Allocation gates</div>
                </article>
            </div>
        </div>
    </section>
</main>

<!--WHY US-->
<section class="full-bg-section">
    <div class="why-us-container">
        <!-- Left image block -->
        <div class="why-us-image">
            <!-- Replace with actual image later -->
            <div class="why-us-image image-placeholder">Something interesting here.</div>
            <!-- <img src="assets/images/scribble.png" alt="img"> -->
        </div>

        <!-- Vertical separator -->
        <div class="why-us-separator" aria-hidden="true"></div>

        <!-- Right text content -->
        <div class="why-us-content">
            <h2>Why us?</h2>
            <p>
                Only <span
                    class="underline-load" data-flicker="force">0.007%</span> of traders ever receive their first payout
                from contemporary prop firms.
                We are building the system that changes that, and it starts with you.
            </p>
        </div>
    </div>
</section>

<!--CHALLENGE OFFERS-->
<section id="traditional-challenge" class="challenge-offers">
    <div class="container">
        <h2>Traditional Challenge Offers</h2>
        <p class="subtext">
            You still want to pay for capital rather than have it for free?
            Here, choose your preferred account size below and get started.
            All the challenges follow the classic two-step structure alongside usual rules.
        </p>


        <div class="balance-selector">
            <span>Select Capital Size:</span>
            <button class="balance-btn active" data-size="10000">$10,000</button>
            <button class="balance-btn" data-size="25000">$25,000</button>
            <button class="balance-btn" data-size="50000">$50,000</button>
            <button class="balance-btn" data-size="100000">$100,000</button>
            <button class="balance-btn" data-size="200000">$200,000</button>
        </div>


        <div class="terms-table">
            <div class="table-row header">
                <div class="cell empty"></div>
                <div class="cell head">Challenge</div>
                <div class="cell head">Verification</div>
                <div class="cell head">Certified Trader</div>
            </div>


            <div class="table-row">
                <div class="cell label">Trading Period</div>
                <div class="cell">Unlimited</div>
                <div class="cell">Unlimited</div>
                <div class="cell">Unlimited</div>
            </div>


            <div class="table-row">
                <div class="cell label">Minimum Trading Days</div>
                <div class="cell">4 Days</div>
                <div class="cell">4 Days</div>
                <div class="cell">X</div>
            </div>


            <div class="table-row">
                <div class="cell label">Max Daily Loss</div>
                <div class="cell daily-loss"></div>
                <div class="cell daily-loss"></div>
                <div class="cell daily-loss"></div>
            </div>


            <div class="table-row">
                <div class="cell label">Max Total Loss</div>
                <div class="cell total-loss"></div>
                <div class="cell total-loss"></div>
                <div class="cell total-loss"></div>
            </div>


            <div class="table-row">
                <div class="cell label">Profit Target</div>
                <div class="cell target"></div>
                <div class="cell target"></div>
                <div class="cell">N/A</div>
            </div>
        </div>
    </div>
</section>


<!-- FEATURES / TESTIMONIALS / CONTACT / FOOTER -->
<div class="full-bg-section end">
    <section class="container">
        <div class="testimonials">
            <div class="review reveal">
                <p>“IPFX changed how I scaled — finally a platform that rewards skill.”</p>
                <small>— A. Patel, day trader</small>
            </div>
            <div class="review reveal">
                <p>“Transparent, fair, and the support team actually cares.”</p>
                <small>— J. Nguyen, swing trader</small>
            </div>
        </div>

        <div class="contact">
            <div class="reveal">
                <h3 style="font-family:'Space Grotesk','Inter'; font-size:1.3rem; margin:0 0 6px;">Get in touch</h3>
                <p class="text">Questions or partnerships? Email us at <a href="mailto:enquiries@ipfxcapital.com"
                                                                          style="color:var(--mint)">enquiries@ipfxcapital.com</a>.
                </p>
                <p style="margin-top:12px"><a class="mini-cta" href="infinity.html">Start Infinity Challenge</a></p>
            </div>
        </div>

        <footer>
            <hr style="border:none; border-top:1px solid rgba(255,255,255,0.08); margin:40px 0 32px;">
            <div style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap">
                <div>© <span id="year"></span> IPFX Capital</div>
                <div style="color:var(--muted)">• <a href="#" style="color:var(--mint)">Privacy</a> •
                    <a href="#" style="color:var(--mint)">Terms</a></div>
            </div>
            <hr style="border:none; border-top:1px solid rgba(255,255,255,0.08); margin:32px 0 28px;">

            <div style="font-size:0.85rem; line-height:1.7; color:rgba(255,255,255,0.55); max-width:90ch; margin:0 0 16px; text-align:left;">
                <p style="margin:0 0 12px;"><strong style="color:rgba(255,255,255,0.7);">Risk Disclosure:</strong> Trading derivatives and leveraged products carries significant risk. You may lose more than your initial investment. Past performance does not guarantee future results. IPFX Capital provides access to trading capital but does not guarantee profitability or protection against losses.</p>

                <p style="margin:0 0 12px;"><strong style="color:rgba(255,255,255,0.7);">Regulatory Notice:</strong> IPFX Capital operates as a proprietary trading platform. We are not a licensed broker-dealer or investment adviser. All funded accounts are proprietary and trades are executed on behalf of IPFX Capital, not the individual trader.</p>

                <p style="margin:0;"><strong style="color:rgba(255,255,255,0.7);">Geographic Restrictions:</strong> Services may not be available in all jurisdictions. It is your responsibility to ensure compliance with local laws and regulations. Prohibited jurisdictions include but are not limited to regions where proprietary trading platforms are restricted.</p>
            </div>
        </footer>
    </section>
</div>
<script>
    const terms = {
        10000: {daily: 500, total: 1000, target1: 1000, target2: 500},
        25000: {daily: 1250, total: 2500, target1: 2500, target2: 1250},
        50000: {daily: 2500, total: 5000, target1: 5000, target2: 2500},
        100000: {daily: 5000, total: 10000, target1: 10000, target2: 5000},
        200000: {daily: 10000, total: 20000, target1: 20000, target2: 10000}
    };


    const buttons = document.querySelectorAll('.balance-btn');
    const dailyEls = document.querySelectorAll('.daily-loss');
    const totalEls = document.querySelectorAll('.total-loss');
    const targetEls = document.querySelectorAll('.target');


    buttons.forEach(btn => {
        btn.addEventListener('click', () => {
            buttons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');


            const size = btn.dataset.size;
            const t = terms[size];
            dailyEls.forEach(el => el.textContent = `$${t.daily.toLocaleString()}`);
            totalEls.forEach(el => el.textContent = `$${t.total.toLocaleString()}`);
            targetEls[0].textContent = `$${t.target1.toLocaleString()}`;
            targetEls[1].textContent = `$${t.target2.toLocaleString()}`;
        });
    });


    // Trigger default
    document.querySelector('.balance-btn.active').click();
</script>
<script>
    // Footer year
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    // Reveal on scroll (subtle fade-up 20px)
    const io = new IntersectionObserver((entries) => {
        entries.forEach(e => {
            if (e.isIntersecting) {
                e.target.classList.add('is-visible');
                io.unobserve(e.target);
            }
        });
    }, {threshold: 0.12});
    document.querySelectorAll('.reveal').forEach(el => io.observe(el));

    // Arrow down reveal
    const arrowIo = new IntersectionObserver((entries) => {
        entries.forEach(e => {
            if (e.isIntersecting) {
                e.target.classList.add('is-visible');
                arrowIo.unobserve(e.target);
            }
        });
    }, {threshold: 0.3});
    document.querySelectorAll('.arrow-down').forEach(el => arrowIo.observe(el));

    // Minimal count-up feel (only if value is plain number or $/hrs style)
    const cleanNumber = (s) => {
        const n = s.replace(/[^0-9.]/g, '');
        return n ? parseFloat(n) : null;
    };
    const formatLike = (original, num) => {
        if (/\$/.test(original)) return '$' + Math.round(num).toLocaleString();
        if (/hrs?/.test(original)) return Math.round(num) + ' hrs';
        if (/min/.test(original)) return Math.round(num) + ' min';
        return Math.round(num).toLocaleString();
    };

    const countupIo = new IntersectionObserver((entries) => {
        entries.forEach(e => {
            if (e.isIntersecting) {
                const el = e.target;
                const original = el.textContent.trim();
                const base = cleanNumber(original);
                if (base === null) return;

                el.textContent = '0';
                const duration = 1800; // ms (increased from 900)
                const start = performance.now();

                function tick(now) {
                    const t = Math.min(1, (now - start) / duration);
                    const eased = 1 - Math.pow(1 - t, 3);
                    el.textContent = formatLike(original, base * eased);
                    if (t < 1) requestAnimationFrame(tick);
                    else el.textContent = original;
                }

                requestAnimationFrame(tick);
                countupIo.unobserve(el);
            }
        });
    }, {threshold: 0.5});

    document.querySelectorAll('[data-countup]').forEach(el => countupIo.observe(el));

    // Product card typewriter effect and navigation
    const productLinks = {
        'Infinity Challenge': 'infinity.html',
        'Personalized Application Challenge (PAC)': 'personalised-challenge.html',
        'Insurance / Retention': 'faq.html',
        'Social Trading — Pot System': 'trading-pot.html',
        'Traditional Challenge': '#traditional-challenge',
        'AI & Behavioural Oversight': 'faq.html'
    };

    document.querySelectorAll('.product-card').forEach(card => {
        const description = card.dataset.description;
        const typewriterEl = card.querySelector('.typewriter-text');
        const cardTitle = card.querySelector('h3').textContent;
        let typewriterTimeout = null;
        let clearDelayTimeout = null;
        let isTyping = false;
        let typingComplete = false;
        if (!description || !typewriterEl) return;

        function typeWriter(text, index = 0) {
            if (index < text.length && isTyping) {
                typewriterEl.textContent = text.substring(0, index + 1);
                const delay = Math.random() * 8 + 5;
                typewriterTimeout = setTimeout(() => typeWriter(text, index + 1), delay);
            } else if (index >= text.length) {
                typingComplete = true;
            }
        }

        card.addEventListener('mouseenter', () => {
            if (clearDelayTimeout) {
                clearTimeout(clearDelayTimeout);
                clearDelayTimeout = null;
            }
            isTyping = true;
            typingComplete = false;
            typewriterEl.textContent = '';
            if (typewriterTimeout) clearTimeout(typewriterTimeout);
            typeWriter(description);
        });

        card.addEventListener('mouseleave', () => {
            isTyping = false;
            if (typewriterTimeout) clearTimeout(typewriterTimeout);

            if (typingComplete) {
                clearDelayTimeout = setTimeout(() => {
                    typewriterEl.textContent = '';
                    typingComplete = false;
                }, 5000);
            } else {
                typewriterEl.textContent = '';
            }
        });

        card.addEventListener('click', () => {
            const link = productLinks[cardTitle];
            if (link) {
                if (link.startsWith('#')) {
                    const targetSection = document.querySelector(link);
                    if (targetSection) {
                        targetSection.scrollIntoView({behavior: 'smooth'});
                    }
                } else {
                    window.location.href = link;
                }
            }
        });

        card.style.cursor = 'pointer';
    });

    // ===== Candlestick Animation (Canvas) — unchanged =====

    (function () {
        const canvas = document.getElementById('candles');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');

        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        let running = true;

        // ===== Size management (avoid layout in render loop) =====
        let dpr = 1;
        let cssW = 0, cssH = 0;   // cached CSS pixel size
        let pxW = 0,  pxH = 0;    // backing store size

        function applySize() {
            // Set DPR once (or when DPR changes)
            const newDpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
            if (newDpr !== dpr) dpr = newDpr;

            const needResize = (canvas.width !== Math.floor(cssW * dpr)) || (canvas.height !== Math.floor(cssH * dpr));
            if (needResize) {

                canvas.width  = Math.floor(cssW * dpr);
                canvas.height = Math.floor(cssH * dpr);
                pxW = canvas.width  / dpr;
                pxH = canvas.height / dpr;

                ctx.setTransform(1, 0, 0, 1, 0, 0);
                ctx.scale(dpr, dpr);

                recalcMaxBars();

                // Rebuild any prerendered layers here if you add them later.
            }
        }

        // Observe the canvas box size without triggering layout in the render loop
        const ro = new ResizeObserver(entries => {
            for (const e of entries) {
                const cr = e.contentRect;
                cssW = Math.max(1, cr.width);
                cssH = Math.max(1, cr.height);
                applySize();
            }
        });
        ro.observe(canvas);

        // Fallback initial size (just in case RO fires late)
        queueMicrotask(() => {
            if (cssW === 0 || cssH === 0) {
                const rect = canvas.getBoundingClientRect();
                cssW = Math.max(1, rect.width  || canvas.clientWidth  || canvas.offsetWidth  || 600);
                cssH = Math.max(1, rect.height || canvas.clientHeight || canvas.offsetHeight || 300);
                applySize();
            }
        });

        // ===== Data & rendering =====
        const series = [];
        function nextBar(prev) {
            const drift = 0.01, vol = 4.5;
            let close = prev + (Math.random() - 0.5) * vol + drift;
            close = Math.max(92, Math.min(108, close));
            const open = prev;
            let high = Math.max(open, close) + Math.random() * 2.0;
            let low  = Math.min(open, close) - Math.random() * 2.0;
            // if its too low make high higher, if its too high make low lower
            if (close < 92) {
                close = Math.max(close, 94 + (Math.random() * 2.0));
            }
            if (close > 108) {
                close = Math.min(close, 106 - (Math.random() * 2.0));
            }
            return { open, high, low, close };
        }
        let last = 100;
        for (let i = 0; i < 175; i++) { const b = nextBar(last); series.push(b); last = b.close; }

        const globalMin = 88;
        const globalMax = 112;

        const pad = 10, barW = 6, gap = 3;
        const step = barW + gap;
        const speed = prefersReduced ? 10 : 26;
        let offset = 0;

        // Add near your constants:
        let maxBars = 0;               // bars that fit in view
        const lead   = 6;              // small buffer so we can draw slightly offscreen

        function recalcMaxBars() {
            if (!pxW) return;
            maxBars = Math.max(1, Math.floor((pxW - 2 * pad) / step)) + lead;
        }


        // ----- Fixed timestep accumulator (prevents big first-frame jump) -----
        const TICK = 1 / 60; // 60 Hz logical update
        let accumulator = 0;
        let lastTime = 0;
        let started = false;

        function update(dt) {
            offset += speed * dt;
            while (offset >= step) {
                offset -= step;
                const b = nextBar(series[series.length - 1].close);
                series.push(b);
                // Keep a sliding window sized to what the screen can show
                while (maxBars > 0 && series.length > maxBars) {
                    series.shift();
                }
            }
        }

        function draw() {
            if (!pxW || !pxH) return; // not sized yet
            recalcMaxBars();
            const w = pxW, h = pxH;

            ctx.clearRect(0, 0, w, h);

            // Grid (cheap; can be prerendered to an offscreen canvas if you want)
            ctx.globalAlpha = 0.22; ctx.strokeStyle = '#2b2d34';
            for (let gy = 0; gy <= 4; gy++) {
                const y = Math.round((h / 4) * gy) + 0.5;
                ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(w, y); ctx.stroke();
            }
            ctx.globalAlpha = 1;

            const y = v => h - pad - ((v - globalMin) / (globalMax - globalMin)) * (h - 2 * pad);

            const upFill = '#1f4b99';
            const downFill = '#ffffff';
            const wick = '#cfd2d7';

            let x = pad - offset;
            for (let i = 5; i < series.length; i++) {
                const b = series[i];
                if (x > w - pad) break;
                if (x + barW < 0) { x += step; continue; }

                ctx.strokeStyle = wick; ctx.lineWidth = 1;
                ctx.beginPath(); ctx.moveTo(x + barW / 2, y(b.high)); ctx.lineTo(x + barW / 2, y(b.low)); ctx.stroke();

                const top = y(Math.max(b.open, b.close));
                const bot = y(Math.min(b.open, b.close));
                ctx.fillStyle = (b.close >= b.open) ? upFill : downFill;
                ctx.fillRect(x, top, barW, Math.max(1, bot - top));

                x += step;
            }
        }

        function frame(ts) {
            if (!running) { lastTime = ts; requestAnimationFrame(frame); return; }
            if (!started) { started = true; lastTime = ts; }

            let dt = (ts - lastTime) / 1000;
            lastTime = ts;

            // Clamp big spikes (first frames / tab switching)
            if (dt > 0.25) dt = 0.25;

            accumulator += dt;
            while (accumulator >= TICK) {
                update(TICK);
                accumulator -= TICK;
            }

            draw();
            requestAnimationFrame(frame);
        }

        // ===== Start after layout & fonts settle a bit =====
        // Kicks off on next paint; idle lets heavy pages finish first work.
        const start = () => requestAnimationFrame(frame);
        if ('requestIdleCallback' in window) {
            requestIdleCallback(start, { timeout: 500 });
        } else if (document.readyState === 'complete') {
            start();
        } else {
            window.addEventListener('load', start, { once: true });
        }

        // Pause when hidden (prevents big dt spikes)
        document.addEventListener('visibilitychange', () => {
            running = document.visibilityState === 'visible';
            if (running) { lastTime = 0; } // reset timing to avoid jump
        });
    })();
</script>
<script>
    // Configuration: your spreadsheet ID and API key
    const sheetId = '1Ffk811lqi8lIJ2zb4JTaqs2jHTzCw6CWXYoYeKVuBHE';       // e.g. "1FABCdEXAMPLE_URL_GOESHERE"
    const apiKey = '';               // your Google API key
    const range = 'Pre-Register Form!H1';                   // sheet name and cell range (H1)

    // Construct the Google Sheets API URL for the specified range
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`;  //:contentReference[oaicite:8]{index=8}

    // Fetch the data from Google Sheets API and update the page
    fetch(url)
        .then(response => response.json())                  // parse the JSON response:contentReference[oaicite:9]{index=9}
        .then(data => {
            if (data.values) {
                const cellValue = data.values[0][0];            // the value in cell H1
                // Instead of querySelector('.value[data-countup]')
                const valueElement = document.querySelector('.live-count');
                valueElement.textContent = cellValue;         // insert the value into the div
            } else {
                console.error('No data returned for H1');
            }
        })
        .catch(error => console.error('Error fetching Google Sheets data:', error));
</script>
<script type="module">
    (() => {
        const canvas = document.getElementById('flowLines');
        if (!canvas) return;
        const ctx = canvas.getContext('2d', { alpha: true });

        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        // Professional blue palette
        const palette = {
            glow:    'rgba(37, 99, 235, 0.2)',
            stroke1: 'rgba(37, 99, 235, 0.4)',
            stroke2: 'rgba(96, 165, 250, 0.6)',
            stroke3: 'rgba(147, 197, 253, 0.3)',
            bgMist:  'rgba(18, 22, 32, 0.03)'
        };

        let running = true;
        let dpr = 1, cssW = 0, cssH = 0, pxW = 0, pxH = 0;

        // Size / DPR
        function applySize() {
            const newDpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
            if (newDpr !== dpr) dpr = newDpr;

            const need = (canvas.width !== Math.floor(cssW * dpr)) || (canvas.height !== Math.floor(cssH * dpr));
            if (need) {
                canvas.width  = Math.floor(cssW * dpr);
                canvas.height = Math.floor(cssH * dpr);
                pxW = canvas.width / dpr;
                pxH = canvas.height / dpr;
                ctx.setTransform(1,0,0,1,0,0);
                ctx.scale(dpr, dpr);
                rebuild();
            }
        }
        const ro = new ResizeObserver(entries => {
            const { width, height } = entries[0].contentRect;
            const newW = Math.max(1, Math.round(width));
            const newH = Math.max(1, Math.round(height));
            if (newW !== cssW || newH !== cssH) {
                cssW = newW; cssH = newH; applySize();
            }
        });
        ro.observe(canvas);

        // ---- Flow lines
        const lines = [];
        let lineCount = 0;
        const maxCountBase = 24;
        const baseSpeed = prefersReduced ? 8 : 20;
        let speedBoost = 0;
        let targetBoost = 0;

        function random(min, max) { return min + Math.random() * (max - min); }

        function rebuild() {
            lines.length = 0;
            // Scale count with area but cap to keep it light
            const area = (pxW * pxH) / (1280 * 720);
            lineCount = Math.min(32, Math.max(8, Math.round(maxCountBase * area)));

            for (let i = 0; i < lineCount; i++) {
                lines.push(makeLine(true));
            }
        }

        function makeLine(seedY = false) {
            const x = random(pxW * 0.25, pxW * 0.75);
            const wiggleAmp = random(20, 50);
            const wiggleFreq = random(0.15, 0.35);
            const thickness = random(0.8, 2.2);
            const variant = Math.random();
            return {
                x0: x,
                y: seedY ? random(-pxH, pxH) : -random(60, pxH * 0.6),
                t: Math.random() * 10,
                amp: wiggleAmp,
                freq: wiggleFreq,
                width: thickness,
                len: random(pxH * 0.4, pxH * 0.85),
                variant: variant,
                alpha: random(0.4, 0.75)
            };
        }

        function drawLine(l, dt, spd) {
            l.t += dt;
            l.y += spd * dt;

            if (l.y - l.len > pxH + 60) {
                Object.assign(l, makeLine(false));
            }

            const segs = 20;
            const step = l.len / segs;
            const mid = l.x0;

            ctx.lineWidth = l.width;
            ctx.globalAlpha = l.alpha;

            const grad = ctx.createLinearGradient(mid, l.y - l.len, mid, l.y);
            if (l.variant < 0.33) {
                grad.addColorStop(0, palette.stroke3);
                grad.addColorStop(0.5, palette.stroke1);
                grad.addColorStop(1, palette.stroke2);
            } else if (l.variant < 0.66) {
                grad.addColorStop(0, palette.stroke1);
                grad.addColorStop(1, palette.stroke2);
            } else {
                grad.addColorStop(0, palette.stroke2);
                grad.addColorStop(0.6, palette.stroke1);
                grad.addColorStop(1, palette.stroke3);
            }
            ctx.strokeStyle = grad;

            ctx.shadowColor = palette.glow;
            ctx.shadowBlur = 12;

            ctx.beginPath();
            for (let i = 0; i <= segs; i++) {
                const y = l.y - l.len + i * step;
                const phase = (i * 0.4) + l.t * (2 * Math.PI * l.freq);
                const x = mid + Math.sin(phase) * l.amp;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            ctx.shadowBlur = 0;
            ctx.globalAlpha = 1;
        }

        function drawMist() {
            ctx.fillStyle = palette.bgMist;
            ctx.fillRect(0, 0, pxW, pxH);
        }

        // Scroll velocity → temporary speed boost
        let lastScrollY = window.scrollY;
        let lastBoostTime = performance.now();
        function onScroll() {
            const now = performance.now();
            const dy = Math.abs(window.scrollY - lastScrollY);
            lastScrollY = window.scrollY;

            // Convert pixels scrolled in this frame to a boost; clamp for sanity
            const raw = Math.min(3.0, dy * 0.02);
            // Merge bursts but avoid spikes when browser batches scroll events
            const dt = Math.max(16, now - lastBoostTime);
            lastBoostTime = now;
            targetBoost = Math.max(targetBoost, raw * (16 / dt));
        }
        window.addEventListener('scroll', onScroll, { passive: true });

        // Pause when tab hidden (prevents timing spikes)
        document.addEventListener('visibilitychange', () => {
            running = document.visibilityState === 'visible';
        });

        // Main loop
        let last = performance.now();
        (function loop(now = performance.now()) {
            if (!pxW || !pxH) { requestAnimationFrame(loop); return; }

            const dt = Math.min(0.05, (now - last) / 1000);
            last = now;

            // Ease boost toward target, then decay toward 0
            const ease = 8; // larger = snappier
            speedBoost += (targetBoost - speedBoost) * Math.min(1, dt * ease);
            targetBoost *= Math.pow(0.001, dt);    // bleed off target quickly
            speedBoost *= Math.pow(0.25, dt);      // decay over a second or two

            ctx.clearRect(0, 0, pxW, pxH);
            drawMist();

            const spd = (prefersReduced ? baseSpeed * 0.4 : baseSpeed) * (1 + speedBoost);
            for (let i = 0; i < lines.length; i++) drawLine(lines[i], dt, spd);

            if (running) requestAnimationFrame(loop);
            else requestAnimationFrame(loop); // keep sizing responsive; cheap to keep
        })();

        // Initial size if RO fires late
        queueMicrotask(() => {
            if (!cssW || !cssH) {
                const r = canvas.getBoundingClientRect();
                cssW = Math.max(1, r.width || canvas.clientWidth || 800);
                cssH = Math.max(1, r.height || canvas.clientHeight || 400);
                applySize();
            }
        });
    })();
</script>
</body>
</html>